{
  "name": "Scientific Agent Sub-Workflow",
  "nodes": [
    {
      "parameters": {},
      "id": "workflow-trigger",
      "name": "Execute Workflow Trigger",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1,
      "position": [250, 300]
    },
    {
      "parameters": {
        "agent": "conversationalAgent",
        "promptType": "define",
        "text": "={{ $json.comment_text }}",
        "hasOutputParser": false,
        "options": {
          "systemMessage": "You are a scientific expert analyzing public comments submitted to government agencies.\\n\\nYour role is to:\\n1. Identify any scientific claims, data, or evidence presented in the comment\\n2. Evaluate the quality and credibility of scientific arguments\\n3. Assess methodologies, data sources, and scientific reasoning\\n4. Provide a concise analysis and suggested evidence-based reply\\n\\nIf the comment contains NO scientific claims, data, or evidence, respond with exactly: \\"No Comment\\"\\n\\nIf the comment does contain scientific content, provide your response in the following format:\\n- Scientific Claims: [1-2 sentence summary of scientific arguments/data]\\n- Validity Assessment: [1-2 sentence evaluation of evidence quality and methodology]\\n- Suggested Reply: [1-2 sentence recommendation for evidence-based response]\\n\\nKeep your total response to 5 sentences or fewer (excluding \\"No Comment\\" responses).\\nBe specific and reference actual studies, data, or scientific principles mentioned."
        }
      },
      "id": "scientific-agent",
      "name": "Scientific Analysis Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.6,
      "position": [450, 300]
    },
    {
      "parameters": {
        "model": "gemini-1.5-pro",
        "options": {
          "temperature": 0.5,
          "maxTokens": 500
        }
      },
      "id": "google-model",
      "name": "Google Gemini Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [450, 480],
      "credentials": {
        "googlePalmApi": {
          "id": "google-credentials",
          "name": "Google AI API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Format scientific agent response\\nconst output = $input.item.json.output;\\nconst isNoComment = output.trim() === 'No Comment';\\n\\nreturn {\\n  json: {\\n    comment_id: $input.item.json.comment_id,\\n    scientific_assessment: isNoComment ? null : output,\\n    has_scientific_content: !isNoComment\\n  }\\n};"
      },
      "id": "format-scientific-response",
      "name": "Format Scientific Response",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [650, 300]
    }
  ],
  "pinData": {},
  "connections": {
    "Execute Workflow Trigger": {
      "main": [
        [
          {
            "node": "Scientific Analysis Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scientific Analysis Agent": {
      "main": [
        [
          {
            "node": "Format Scientific Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Model": {
      "ai_languageModel": [
        [
          {
            "node": "Scientific Analysis Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "1",
  "id": "scientific-agent-workflow",
  "meta": {
    "instanceId": "your-instance-id"
  },
  "tags": []
}
