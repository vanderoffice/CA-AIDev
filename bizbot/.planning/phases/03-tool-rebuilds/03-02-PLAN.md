---
phase: 03-tool-rebuilds
plan: 02
type: execute
---

<objective>
Enhance the License Finder results display with a summary dashboard, collapsible phase groups, cross-tool CTAs, and verify the full wizard flow on production.

Purpose: The wizard rebuild (03-01) preserves the existing results rendering. This plan upgrades the results experience: a summary dashboard gives users instant overview, collapsible groups reduce visual overload, and cross-tool CTAs connect the finder to BizBot's chat mode for deeper questions.
Output: Polished results display with summary dashboard + human-verified wizard flow on production.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Auto-selected based on dependency graph:
@.planning/phases/03-tool-rebuilds/03-01-SUMMARY.md

# Key production files (read via SSH):
# /root/vanderdev-website/src/components/bizbot/LicenseFinder.jsx (rewritten by 03-01)
# /root/vanderdev-website/src/components/bizbot/LicenseCard.jsx (152 lines — minor updates)
# /root/vanderdev-website/src/pages/BizBot.jsx (updated by 03-01)

# WaterBot reference for results patterns:
# ~/Documents/GitHub/CA-AIDev/waterbot/src/components/FundingNavigator.jsx — 3-tier results + RAG enrichment panel
# ~/Documents/GitHub/CA-AIDev/waterbot/src/components/ResultCard.jsx — expandable card pattern

**Production-first:** All code changes via `ssh vps` to `/root/vanderdev-website/`.

**Tech available from prior phases:** WizardStepper, LicenseCard, react-markdown, remark-gfm

**Constraining decisions:**
- [03-01]: Webhook payload/response unchanged — results data shape is: `{ success, summary: { totalLicenses, estimatedCostRange, formationCount, stateCount, localCount, industryCount }, licenses, grouped: { formation[], state[], local[], industry[], ongoing[] } }`
- [Phase 0]: LicenseFinder has its own react-markdown import — keep for now, Phase 4 unifies with shared pipeline
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhanced results display with summary dashboard and cross-tool CTA</name>
  <files>/root/vanderdev-website/src/components/bizbot/LicenseFinder.jsx, /root/vanderdev-website/src/components/bizbot/LicenseCard.jsx</files>
  <action>
  **First:** SSH to VPS and read the updated LicenseFinder.jsx (from 03-01) and LicenseCard.jsx to understand the current results rendering.

  **Enhance the results view with these additions:**

  **1. Summary Dashboard (top of results, above phase groups)**
  The webhook response already includes `results.summary` with `totalLicenses`, `estimatedCostRange`, `formationCount`, `stateCount`, `localCount`, `industryCount`. Build a visual dashboard:
  - Large total count with "licenses & permits identified" label
  - Estimated cost range in a highlighted pill
  - 5-column phase breakdown showing count per phase with phase icons:
    - Formation (blue) | State (purple) | Local (green) | Industry (orange) | Ongoing (gray)
  - Use BizBot's orange accent for the primary highlight color
  - Match the dark card style from the existing BizBot UI (`bg-neutral-800/50 border border-neutral-700/50 rounded-xl`)

  **2. Collapsible Phase Groups**
  Currently, all 5 phase groups render fully expanded. Add expand/collapse toggle:
  - Each phase section header gets a chevron icon (▼ expanded, ▶ collapsed)
  - Click header to toggle visibility of that group's LicenseCards
  - Default state: all groups expanded (user can collapse to focus)
  - Show count badge in header: "Formation (3)" with phase color
  - Skip empty groups entirely (don't render "Industry (0)")

  **3. Phase Progress Indicator**
  Add a horizontal progress bar between summary and groups:
  - 5 connected dots/pills: Formation → State → Local → Industry → Ongoing
  - Each pill shows phase name + count
  - Color matches phase group (blue, purple, green, orange, gray)
  - Purely informational — shows what licensing phases apply to this business

  **4. "Start Over" Button**
  Add a "Start New Search" button at the top of results (near summary):
  - Resets wizard to Step 0 (clear all answers, clear results)
  - Secondary style (outline, not filled) — don't compete with results

  **5. Cross-Tool CTA to Chat Mode**
  At the bottom of results, add a callout card (like FundingNavigator's cross-tool CTA):
  - Background: `bg-orange-500/10 border border-orange-500/30 rounded-lg p-5`
  - Heading: "Have questions about these licenses?"
  - Subtext: "Chat with BizBot for personalized guidance about your specific situation"
  - Button: "Ask BizBot" — calls `onStartChat()` with business context from the wizard answers
  - This passes the collected `{ industry, entityType, county, city, ... }` to chat mode so BizBot has full context

  **What to avoid and WHY:**
  - Do NOT change the webhook call or payload — results data comes from the existing webhook response
  - Do NOT add animation libraries — use CSS transitions for collapse (`max-height` + `overflow: hidden` + `transition`)
  - Do NOT restructure LicenseCard.jsx significantly — keep its existing props interface, only add minor visual tweaks if needed (e.g., subtle hover effect)
  - Do NOT import `getMarkdownComponents` or change the markdown rendering pipeline — Phase 4 handles that unification
  </action>
  <verify>ssh vps "cd /root/vanderdev-website && npm run build" succeeds without errors</verify>
  <done>Results view shows: (1) summary dashboard with total count, cost range, per-phase breakdown; (2) collapsible phase groups with chevron toggle and count badges; (3) horizontal phase progress indicator; (4) "Start New Search" button resetting wizard; (5) cross-tool CTA to chat mode with context passing. Empty groups are hidden. Build passes.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete License Finder wizard rebuild: 5-step guided questionnaire (Industry Category → Specific Type → Business Structure → Location → Details) with enhanced results display (summary dashboard, collapsible phase groups, progress indicator, cross-tool CTA to chat)</what-built>
  <how-to-verify>
    1. Visit: https://vanderdev.net/bizbot
    2. Select "License Finder" from mode selection
    3. **Wizard Flow:**
       - Step 0: Select an industry category (e.g., "Food & Beverage") — should auto-advance
       - Step 1: Select specific type (e.g., "Restaurant") — should auto-advance
       - Step 2: Select business structure (e.g., "LLC") — should auto-advance
       - Step 3: Select county, optionally city, toggle home-based — click Next
       - Step 4: Toggle employees/tangible goods/new business — click "Find My Licenses"
    4. **Results Display:**
       - Verify summary dashboard shows total count + cost range + per-phase counts
       - Verify phase groups are collapsible (click headers to toggle)
       - Verify empty groups are hidden
       - Verify phase progress bar shows 5 phases with counts
    5. **Navigation:**
       - Click "Start New Search" — should reset to Step 0
       - Walk through wizard again, verify results
       - Click "Ask BizBot" CTA — should switch to chat mode with business context
       - Verify chat mode shows the business context banner
    6. **Back Navigation:**
       - Start wizard, advance to Step 2, press Back — should return to Step 1
       - Press Back again — should return to Step 0
       - Press Back on Step 0 — should return to mode selection
    7. **RAG Detail:**
       - In results, click "Get Detailed Information" — should fetch and render RAG response
    8. **Edge Cases:**
       - Try submitting without selecting industry (should not be possible — no Submit until Step 4)
       - Try a different industry path (e.g., Cannabis → Retail) — verify different results
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 3, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `ssh vps "cd /root/vanderdev-website && npm run build"` succeeds
- [ ] Summary dashboard renders with total count, cost range, per-phase breakdown
- [ ] Phase groups collapse/expand with chevron toggle
- [ ] Empty phase groups are hidden
- [ ] "Start New Search" resets wizard to Step 0
- [ ] Cross-tool CTA switches to chat mode with business context
- [ ] Human verified full wizard flow on production
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Human approved the wizard flow on production
- No build errors or warnings introduced
- Phase 3: Tool Rebuilds complete
</success_criteria>

<output>
After completion, create `.planning/phases/03-tool-rebuilds/03-02-SUMMARY.md`:

# Phase 3 Plan 2: Results Enhancement & Verification Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `src/components/bizbot/LicenseFinder.jsx` - Results enhancement
- `src/components/bizbot/LicenseCard.jsx` - Minor updates (if any)

## Decisions Made

[Key decisions]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

Phase 3 complete. Ready for Phase 4: UI/UX Polish.
</output>
