# PLAN-12-03: Production Deployment and Testing

## Objective
Deploy WaterBot to production at vanderdev.net and verify all functionality works in the production environment.

## Deployment Steps

### 1. Deploy to Production
Push to main branch triggers GitHub Actions:
```bash
git checkout main
git merge feat/waterbot-integration
git push origin main
```

GitHub Actions workflow will:
1. Checkout code
2. Install dependencies (npm ci)
3. Build site (npm run build)
4. rsync dist/ to VPS at 212.38.95.33

### 2. Verify Deployment
- [ ] GitHub Actions workflow completes successfully
- [ ] Check VPS: `ls -la /root/vanderdev-website/dist/`
- [ ] Site accessible at https://vanderdev.net
- [ ] WaterBot page loads at https://vanderdev.net/waterbot

## Production Testing

### 3. Functional Tests
Run each test at https://vanderdev.net/waterbot:

| Test | Expected Result | Pass |
|------|-----------------|------|
| Navigate to /waterbot | Page loads with mode selection | [ ] |
| Click "Ask WaterBot" | Chat interface appears | [ ] |
| Click suggested question | Message sent, response received | [ ] |
| Send custom message | Response with sources displayed | [ ] |
| Click back button | Returns to mode selection | [ ] |
| Refresh page | Session preserved | [ ] |
| Mobile view | Responsive layout, MobileNav works | [ ] |

### 4. RAG Quality Tests
Ask these questions and verify responses are accurate and cite sources:

| Question | Expected Topics | Pass |
|----------|----------------|------|
| "What is an NPDES permit?" | Permit overview, Clean Water Act | [ ] |
| "How do I report a water violation?" | Reporting procedures, contact info | [ ] |
| "What funding for small communities?" | SRF, SAFER, DAC programs | [ ] |
| "Who is my Regional Board?" | 9 RWQCBs, jurisdiction info | [ ] |
| "What are appropriative water rights?" | Post-1914 rights, permit process | [ ] |

### 5. Performance Tests
| Metric | Target | Actual | Pass |
|--------|--------|--------|------|
| Time to first byte | < 500ms | | [ ] |
| Chat response time | < 10s | | [ ] |
| Lighthouse Performance | > 80 | | [ ] |
| Lighthouse Accessibility | > 90 | | [ ] |

### 6. Error Handling Tests
| Test | Expected Result | Pass |
|------|-----------------|------|
| Send empty message | Input disabled/ignored | [ ] |
| Rapid message sending | Loading state prevents dupes | [ ] |
| Network error | Error message displayed | [ ] |

## Issue Resolution
If any tests fail:
1. Document the issue
2. Fix in feature branch
3. Redeploy
4. Re-test

## Completion Criteria
- All functional tests pass
- All RAG quality tests pass
- Performance meets targets
- Error handling works correctly

## Output
- Production deployment verified
- All tests documented
- WaterBot live at vanderdev.net/waterbot
- Phase 12 SUMMARY created
