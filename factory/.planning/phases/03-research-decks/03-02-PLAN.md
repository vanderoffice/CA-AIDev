---
phase: 03-research-decks
plan: 02
type: execute
---

<objective>
Create dual presentation deck templates (stakeholder + technical) and the build-decks.md skill that orchestrates the existing /deck pipeline to generate both HTML presentations from factory research outputs.

Purpose: Every factory project ships with presentation-ready deliverables. This plan creates the templates and orchestration so a single skill invocation produces both stakeholder and technical decks from research output.
Output: Two deck markdown templates in `factory/templates/decks/`, `~/.claude/commands/gov-factory/build-decks.md` skill file
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/phase-prompt.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plan in this phase:
@.planning/phases/03-research-decks/03-01-SUMMARY.md

# Deck skill (pipeline we're feeding into):
@~/.claude/commands/deck/SKILL.md
@~/.claude/commands/deck/templates/research-output.md
@~/.claude/commands/deck/examples/demo.md

# Research output templates (created in 03-01):
@factory/templates/decks/stakeholder-brief.md
@factory/templates/decks/developer-assessment.md

**Tech stack available:** /deck skill (Reveal.js 5.1.0, dark theme, left-nav, charts, Mermaid, offline HTML), Perplexity MCP, llm-gateway MCP
**Established patterns:** /deck uses `---` as slide boundaries, `:::chart`, `:::diagram`, `:::collapse` custom blocks, deck research-output.md template format
**Constraining decisions:**
- [PROJECT]: Decks generated twice — post-research (this phase) and post-deploy (Phase 7 final decks with live metrics)
- [PROJECT]: Two HTML decks per project via /deck — stakeholder for government audiences, technical for developers
- [PROJECT]: vanderdev.net design system (dark theme, Inter/JetBrains Mono, orange accents)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create stakeholder and technical deck markdown templates</name>
  <files>factory/templates/decks/stakeholder-deck.md, factory/templates/decks/technical-deck.md</files>
  <action>
Create two /deck-compatible markdown templates that transform research output into presentation-ready slide content. These are NOT the brief/assessment docs from 03-01 — these are slide-structured markdown that /deck's build pipeline converts to HTML.

**stakeholder-deck.md** — Government audience presentation (10-15 slides):
- Title slide with domain name, "Automation Feasibility Assessment", date, California state context
- Executive Summary slide (from stakeholder brief)
- Current State slide with pain points (use :::collapse for details)
- The Opportunity slide with key metrics (use big number format from /deck)
- Timeline slide (use :::diagram timeline)
- Risk Overview slide (use :::chart bar for risk matrix)
- Recommendation slide
- Next Steps slide
- Q&A / Contact slide

Use {{PLACEHOLDER}} format for all domain-specific content. Include `---` between each slide section. Include :::chart and :::diagram blocks where data visualization adds value.

**technical-deck.md** — Developer audience presentation (12-18 slides):
- Title slide with domain name, "Technical Architecture Assessment", date
- System Landscape slide (use :::diagram architecture)
- Data Sources & APIs slide (table format)
- Integration Points slide (use :::diagram flow)
- RAG Pipeline Fit slide — how this domain maps to the factory pipeline
- Architecture Recommendation slide (use :::diagram architecture)
- Risk Registry slide (table from developer assessment)
- Complexity Estimate slide (use :::chart bar)
- Implementation Phases slide (reference GSD roadmap templates from Phase 2)
- Dependencies & Prerequisites slide
- Tech Stack slide (table of tools/libraries)
- Development Timeline slide (use :::diagram timeline)

Both templates should:
- Follow /deck markdown conventions (--- slide boundaries, ::: custom blocks)
- Use {{PLACEHOLDER}} format consistent with factory templates
- Include slide notes in HTML comments where presenter context helps
- Be sized for 20-30 min presentations
- Map clearly to the stakeholder-brief.md and developer-assessment.md output fields from 03-01
  </action>
  <verify>
    - Both files exist in factory/templates/decks/
    - stakeholder-deck.md has 10+ slide sections separated by ---
    - technical-deck.md has 12+ slide sections separated by ---
    - Both use :::chart, :::diagram, :::collapse custom blocks
    - All placeholders use {{UPPER_SNAKE_CASE}} format
    - Placeholders map to fields in stakeholder-brief.md and developer-assessment.md
  </verify>
  <done>Two deck markdown templates exist with correct /deck syntax, appropriate slide counts, interactive blocks, and placeholders that map to research output fields.</done>
</task>

<task type="auto">
  <name>Task 2: Create build-decks.md skill</name>
  <files>~/.claude/commands/gov-factory/build-decks.md</files>
  <action>
Create the build-decks skill that orchestrates /deck to generate both HTML presentations from factory research outputs.

The skill should:

1. **Accept arguments** — domain slug (required), optional `--stakeholder-only` or `--technical-only` flags, optional `--final` flag (for post-deploy regeneration with live metrics in Phase 7).

2. **Locate research outputs** — Look for `{domain-slug}-stakeholder-brief.md` and `{domain-slug}-developer-assessment.md` in the project directory. Error if not found (research-domain must run first).

3. **Fill deck templates** — Read the stakeholder-deck.md and technical-deck.md templates from `factory/templates/decks/`. Map research output sections to template placeholders. Write filled markdown to temp files.

4. **Invoke /deck --present** for each filled markdown — This leverages the existing deck build pipeline (Reveal.js, dark theme, left-nav, charts, diagrams) without reimplementing anything. Output goes to `~/Documents/Presentations/{domain-slug}-stakeholder-{date}.html` and `~/Documents/Presentations/{domain-slug}-technical-{date}.html`.

5. **Report results** — Show file paths for both generated decks.

6. **What to avoid and WHY:**
   - Do NOT reimplement the /deck build pipeline — invoke /deck skill, don't duplicate its HTML generation
   - Do NOT embed the deck templates inline in the skill — reference them via @-paths so templates stay maintainable
   - Do NOT assume research outputs exist without checking — fail fast with clear "run research-domain first" message
   - Do NOT generate diagrams from scratch — let /deck's diagram pipeline handle :::diagram blocks
  </action>
  <verify>
    - File exists at ~/.claude/commands/gov-factory/build-decks.md
    - Skill references /deck --present for HTML generation
    - Skill references both deck template files via @-paths
    - Skill accepts domain-slug argument
    - Skill checks for research output existence before proceeding
    - Skill outputs to ~/Documents/Presentations/ with domain-slug naming
  </verify>
  <done>build-decks.md skill exists, invokes /deck for HTML generation, references templates, handles both deck types, and fails gracefully if research outputs missing.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Two deck markdown templates (stakeholder-deck.md, technical-deck.md) and build-decks.md skill that orchestrates /deck to generate HTML presentations from research outputs.</what-built>
  <how-to-verify>
    1. Review factory/templates/decks/stakeholder-deck.md — confirm slide structure makes sense for a government audience
    2. Review factory/templates/decks/technical-deck.md — confirm slide structure covers architecture/implementation adequately
    3. Review ~/.claude/commands/gov-factory/build-decks.md — confirm the orchestration flow is correct
    4. Verify that deck template placeholders ({{...}}) map to research output template fields from 03-01
    5. Confirm deck templates use valid /deck custom block syntax (:::chart, :::diagram, :::collapse)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `factory/templates/decks/stakeholder-deck.md` exists with 10+ slides
- [ ] `factory/templates/decks/technical-deck.md` exists with 12+ slides
- [ ] `~/.claude/commands/gov-factory/build-decks.md` exists and is well-structured
- [ ] Deck templates use valid /deck syntax (---, :::chart, :::diagram, :::collapse)
- [ ] Placeholders in deck templates map to research output fields
- [ ] build-decks skill references /deck --present, not custom HTML generation
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Deck templates produce valid /deck input when placeholders are filled
- build-decks skill orchestrates /deck without reimplementing the pipeline
- Human has verified template quality and placeholder mapping
</success_criteria>

<output>
After completion, create `.planning/phases/03-research-decks/03-02-SUMMARY.md`
</output>
